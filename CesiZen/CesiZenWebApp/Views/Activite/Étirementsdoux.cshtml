@{
    ViewData["Title"] = "Étirement";
    var userId = ViewBag.UserId ?? 0;
    var activityId = ViewBag.ActivityId ?? 0;
}
<h1 style="text-align: center; margin-bottom: 20px;">@ViewBag.activityName</h1>
<h5 style="text-align: center; margin-bottom: 40px;">@ViewBag.activityDescription</h5>

<div id="stretching-steps" style="display: flex; flex-direction: column; align-items: center; gap: 20px;">

    <div class="step-card">
        <h4>1. Respiration d'ancrage</h4>
        <p>Inspirez profondément en levant les bras, puis expirez en abaissant les bras.</p>
        <button onclick="startTimer('timer1', 60)">Démarrer 1 min</button>
        <div id="timer1" class="timer">60s</div>
    </div>

    <div class="step-card">
        <h4>2. Étirement du cou</h4>
        <p>Inclinez doucement la tête vers chaque épaule. Faites aussi quelques cercles lents.</p>
        <button onclick="startTimer('timer2', 60)">Démarrer 1 min</button>
        <div id="timer2" class="timer">60s</div>
    </div>

    <div class="step-card">
        <h4>3. Étirement des épaules</h4>
        <p>Étirez chaque épaule en croisant le bras devant vous.</p>
        <button onclick="startTimer('timer3', 60)">Démarrer 1 min</button>
        <div id="timer3" class="timer">60s</div>
    </div>

    <div class="step-card">
        <h4>4. Étirement du dos</h4>
        <p>Enlacez vos doigts et poussez devant vous puis vers le ciel.</p>
        <button onclick="startTimer('timer4', 120)">Démarrer 2 min</button>
        <div id="timer4" class="timer">120s</div>
    </div>

    <div class="step-card">
        <h4>5. Étirement des jambes</h4>
        <p>Penchez-vous doucement vers l’avant jambes tendues puis en tailleur.</p>
        <button onclick="startTimer('timer5', 180)">Démarrer 3 min</button>
        <div id="timer5" class="timer">180s</div>
    </div>

    <div class="step-card">
        <h4>6. Détente finale</h4>
        <p>Allongez-vous ou restez assis en respirant calmement.</p>
        <button onclick="startTimer('timer6', 60)">Démarrer 1 min</button>
        <div id="timer6" class="timer">60s</div>
    </div>

</div>

<!-- 🔽 Bouton Terminer -->
<div style="text-align: center; margin-top: 60px;">
    <form method="post" action="@Url.Action("CreateActivityMetadata", "Activite")">
        <input type="hidden" name="userId" value="@userId" />
        <input type="hidden" name="activityId" value="@activityId" />
        <button type="submit" style="padding: 12px 30px; background-color: #f44336; color: white; border: none; border-radius: 5px; font-size: 1.1rem; cursor: pointer;">
            Terminer
        </button>
    </form>
</div>

<style>
    .step-card {
        background-color: #f9f9f9;
        border-radius: 12px;
        padding: 20px;
        width: 90%;
        max-width: 500px;
        box-shadow: 0 4px 8px rgba(0, 0, 0, 0.1);
        text-align: center;
    }

        .step-card h4 {
            margin-bottom: 10px;
            color: #2c3e50;
        }

        .step-card p {
            margin-bottom: 15px;
            color: #555;
        }

    button {
        background-color: #4CAF50;
        border: none;
        color: white;
        padding: 10px 20px;
        text-align: center;
        font-size: 16px;
        border-radius: 8px;
        cursor: pointer;
        transition: background-color 0.3s ease;
    }

        button:hover {
            background-color: #45a049;
        }

    .timer {
        margin-top: 10px;
        font-size: 18px;
        font-weight: bold;
        color: #333;
    }
</style>

<script>
    function startTimer(timerId, duration) {
        var timerDisplay = document.getElementById(timerId);
        var time = duration;
        timerDisplay.innerHTML = time + 's';
        clearInterval(timerDisplay.interval); // Clear existing interval if any

        timerDisplay.interval = setInterval(function () {
            time--;
            timerDisplay.innerHTML = time + 's';

            if (time <= 0) {
                clearInterval(timerDisplay.interval);
                timerDisplay.innerHTML = "Terminé !";
            }
        }, 1000);
    }
</script>
